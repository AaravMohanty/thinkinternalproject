#!/bin/bash
# Post-merge hook - runs automatically after git pull/merge
# Automatically installs dependencies when requirements change

echo ""
echo "ğŸ” Checking for dependency changes..."

# Check if requirements.txt changed
if git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD | grep --quiet "backend/requirements.txt"; then
    echo "ğŸ“¦ Backend dependencies changed, installing..."
    cd backend
    pip install -r requirements.txt
    cd ..
    echo "âœ… Backend dependencies updated"
fi

# Check if package.json changed
if git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD | grep --quiet "frontend/package.json"; then
    echo "ğŸ“¦ Frontend dependencies changed, installing..."
    cd frontend
    npm install
    cd ..
    echo "âœ… Frontend dependencies updated"
fi

echo "âœ… Repository up to date!"
echo ""
